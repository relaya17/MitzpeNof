{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nconst initialState = {\n  user: null,\n  status: 'idle',\n  error: null\n};\nexport const signUpUser = createAsyncThunk('signUp/signUpUser', async (formData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await fetch('http://localhost:5000/api/signup', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    });\n    if (!response.ok) {\n      throw new Error('שגיאה בהירשמות');\n    }\n    const data = await response.json();\n    return data.user;\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nconst signUpSlice = createSlice({\n  name: 'signUp',\n  initialState,\n  reducers: {\n    clearUser: state => {\n      state.user = null;\n      state.status = 'idle';\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(signUpUser.pending, state => {\n      state.status = 'loading';\n      state.error = null;\n    }).addCase(signUpUser.fulfilled, (state, action) => {\n      state.status = 'success';\n      state.user = action.payload;\n    }).addCase(signUpUser.rejected, (state, action) => {\n      state.status = 'error';\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  clearUser\n} = signUpSlice.actions;\nexport default signUpSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","initialState","user","status","error","signUpUser","formData","rejectWithValue","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","message","signUpSlice","name","reducers","clearUser","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/ארלט/Documents/Visual Studio 2022/MitzpeNof/MyNewProject/client/src/redux/slice/signUpSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { User } from '../types/types';\r\n\r\nexport type SignUpState = {\r\n  user: User | null;\r\n  status: 'idle' | 'loading' | 'success' | 'error';\r\n  error: string | null;\r\n};\r\n\r\nconst initialState: SignUpState = {\r\n  user: null,\r\n  status: 'idle',\r\n  error: null,\r\n};\r\n\r\nexport const signUpUser = createAsyncThunk(\r\n  'signUp/signUpUser',\r\n  async (formData: { name: string; email: string; password: string }, { rejectWithValue }) => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/signup', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(formData)\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('שגיאה בהירשמות');\r\n      }\r\n      const data = await response.json();\r\n      return data.user;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nconst signUpSlice = createSlice({\r\n  name: 'signUp',\r\n  initialState,\r\n  reducers: {\r\n    clearUser: (state) => {\r\n      state.user = null;\r\n      state.status = 'idle';\r\n      state.error = null;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(signUpUser.pending, (state) => {\r\n        state.status = 'loading';\r\n        state.error = null;\r\n      })\r\n      .addCase(signUpUser.fulfilled, (state, action: PayloadAction<User>) => {\r\n        state.status = 'success';\r\n        state.user = action.payload;\r\n      })\r\n      .addCase(signUpUser.rejected, (state, action) => {\r\n        state.status = 'error';\r\n        state.error = action.payload as string;\r\n      });\r\n  }\r\n});\r\n\r\nexport const { clearUser } = signUpSlice.actions;\r\nexport default signUpSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAiBC,gBAAgB,QAAQ,kBAAkB;AAS/E,MAAMC,YAAyB,GAAG;EAChCC,IAAI,EAAE,IAAI;EACVC,MAAM,EAAE,MAAM;EACdC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGL,gBAAgB,CACxC,mBAAmB,EACnB,OAAOM,QAA2D,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAC1F,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,kCAAkC,EAAE;MAC/DC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,QAAQ;IAC/B,CAAC,CAAC;IACF,IAAI,CAACE,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;IACnC;IACA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;IAClC,OAAOD,IAAI,CAACf,IAAI;EAClB,CAAC,CAAC,OAAOE,KAAU,EAAE;IACnB,OAAOG,eAAe,CAACH,KAAK,CAACe,OAAO,CAAC;EACvC;AACF,CACF,CAAC;AAED,MAAMC,WAAW,GAAGrB,WAAW,CAAC;EAC9BsB,IAAI,EAAE,QAAQ;EACdpB,YAAY;EACZqB,QAAQ,EAAE;IACRC,SAAS,EAAGC,KAAK,IAAK;MACpBA,KAAK,CAACtB,IAAI,GAAG,IAAI;MACjBsB,KAAK,CAACrB,MAAM,GAAG,MAAM;MACrBqB,KAAK,CAACpB,KAAK,GAAG,IAAI;IACpB;EACF,CAAC;EACDqB,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACtB,UAAU,CAACuB,OAAO,EAAGJ,KAAK,IAAK;MACtCA,KAAK,CAACrB,MAAM,GAAG,SAAS;MACxBqB,KAAK,CAACpB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDuB,OAAO,CAACtB,UAAU,CAACwB,SAAS,EAAE,CAACL,KAAK,EAAEM,MAA2B,KAAK;MACrEN,KAAK,CAACrB,MAAM,GAAG,SAAS;MACxBqB,KAAK,CAACtB,IAAI,GAAG4B,MAAM,CAACC,OAAO;IAC7B,CAAC,CAAC,CACDJ,OAAO,CAACtB,UAAU,CAAC2B,QAAQ,EAAE,CAACR,KAAK,EAAEM,MAAM,KAAK;MAC/CN,KAAK,CAACrB,MAAM,GAAG,OAAO;MACtBqB,KAAK,CAACpB,KAAK,GAAG0B,MAAM,CAACC,OAAiB;IACxC,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAER;AAAU,CAAC,GAAGH,WAAW,CAACa,OAAO;AAChD,eAAeb,WAAW,CAACc,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}